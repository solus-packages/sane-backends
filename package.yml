name       : sane-backends
version    : 1.0.27
release    : 9
source     :
    - https://gitlab.com/sane-project/backends/-/archive/RELEASE_1_0_27/backends-RELEASE_1_0_27.tar.bz2 : 6a4034a9d29255bb40cf5a19f3d85dd7ba4fe6452eb9b1ae4385bc8175493ec4
license    : GPL-2.0-only
summary    : Scanner Access Now Easy
component  : desktop.util
description: |
    Scanner Access Now Easy (SANE) is a universal scanner interface.
builddeps  :
    - pkgconfig(avahi-core)
    - pkgconfig(libgphoto2)
    - pkgconfig(libtiff-4)
    - pkgconfig(libusb-1.0)
    - pkgconfig(libv4l2)
    - cups-devel
    - libieee1284-devel
    - libjpeg-turbo-devel
    - net-snmp-devel
setup      : |
    %patch -p1 < $pkgfiles/0001-Added-hpaio-to-backend-dll.conf.in.patch
    %configure --enable-avahi \
               --disable-locking
build      : |
    %make
install    : |
    %make_install

    install -D -m644 $pkgfiles/saned.sysusers $installdir/%libdir%/sysusers.d/saned.conf
    install -D -m644 tools/udev/libsane.rules $installdir%libdir%/udev/rules.d/68-sane-backends.rules
    install -D -m644 $pkgfiles/saned.socket $installdir%libdir%/systemd/system/saned.socket
    install -D -m644 $pkgfiles/saned@.service $installdir%libdir%/systemd/system/saned@.service
